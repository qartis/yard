#!/bin/sh

trap "exit" INT TERM
trap "kill 0" EXIT

interruptible () {
  $* &
  wait $!
}

interruptible pulse-channel 0 60
interruptible pulse-channel 1 60
interruptible pulse-channel 2 60

for ch in "0 1" "1 2" "0 2"; do
	set -- $ch
	enable-channel $1
	enable-channel $2
	interruptible sleep 60
	disable-channel $2
	disable-channel $1
done

enable-channel 0
enable-channel 1
enable-channel 2
interruptible sleep 60
disable-channel 0
disable-channel 1
disable-channel 2
